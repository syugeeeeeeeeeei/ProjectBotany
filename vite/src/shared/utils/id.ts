import { nanoid } from "nanoid";

/**
 * ID 生成ユーティリティ (generateId)
 *
 * 【動機】
 * カードのインスタンス、外来種の個体、アクションログなど、
 * ゲーム内で動的に生成される多数のオブジェクトに対して、
 * 重複のない一意な識別子（ID）を割り当てるためです。
 *
 * 【恩恵】
 * - `nanoid` を内部で使用することで、衝突確率が非常に低いセキュアな ID を短く生成できます。
 * - 接頭辞（prefix）をサポートしており、`alien-xxx` や `action-xxx` のように
 *   ID 自体からオブジェクトの種類を判別できるため、デバッグが容易になります。
 *
 * 【使用法】
 * 新しいオブジェクト（カード実体や外来種個体）を生成する際に呼び出します。
 */
/**
 * ユニークIDを生成（nanoid のラッパー）
 * 動的に生成されるオブジェクトに対して、衝突のない識別番号を保証するために必要です
 */
export const generateId = (prefix?: string): string => {
  return prefix ? `${prefix}-${nanoid()}` : nanoid();
};
