# 📋 要件定義書：侵緑 ~外来種 vs 在来種陣取りゲーム~

## 1. 🎮 ゲーム概要

本プロジェクトは、**「外来種植物の脅威と生態系保護」**をテーマにした、2 人対戦型の陣取り戦略ゲームである。
プレイヤーは「在来種サイド」と「外来種サイド」に分かれ、1 台のタブレット端末を挟んで対面でプレイする。限られたラウンド数の中で、外来種サイドは侵略の拡大を、在来種サイドは環境の保全と回復を目指し、最終的なフィールドの支配数を競う。

## 2. 🌏 背景

近年、地域の生態系を脅かす「侵略的外来種」の問題が深刻化している。しかし、その繁殖力の強さや、一度定着してしまった植物を駆除することの困難さは、一般には十分に認知されていない場合が多い。
特に、除草剤を使えない河川敷や公園などでは、人力による継続的な管理が必要不可欠であり、市民レベルでの理解と協力が求められている。

## 3. 🎯 目的

本ゲーム開発の目的は以下の 2 点である。

1. **エンターテインメント**: 短時間（約 10 分）で決着する、戦略性の高い対戦ゲームを提供すること。
2. **教育・啓蒙**: ゲームプレイを通じて、実際の外来種植物の名前、外見、繁殖特性（地下茎で増える、種を飛ばすなど）を知り、駆除の難しさや早期発見の重要性を直感的に学習すること。

---

## 4. 🛠️ 機能要件 (Functional Requirements)

### 4.1. ゲームシステム・ルール

- **対戦形式**
- 1 台のタブレット端末を使用した、2 人対面対戦（オフライン対戦）。
- プレイヤーは「在来種サイド」と「外来種サイド」を担当する。

- **フィールド**
- 縦 10 マス × 横 7 マスのグリッド構成。
- 視点は上空からの定点カメラによる 3D 表示とする。

- **勝利条件**
- 規定ラウンド（6〜8 ラウンドを想定）終了時、「外来種マス」と「在来種マス」の総数を比較し、多い側が勝利。
- または、ゲーム中に在来種マスが 0 になる「完全侵略」達成時点で外来種サイドの勝利。

- **リソース管理（エンバイロメント）**
- カード使用コストとして「エンバイロメント」を使用する。
- ラウンド毎に最大値が+1 され、ラウンド開始時に全回復する。

### 4.2. ラウンド進行

各ラウンドは以下の 4 フェーズで構成される。

1. **ラウンド開始フェーズ**

   - エンバイロメントの最大値増加および全回復。
   - 先駆植生マス（薄緑）から在来種マスへの自動回復。

2. **外来種ターン**

   - 外来種プレイヤーがカードを使用し、外来種を導入する。

3. **在来種ターン**

   - 在来種プレイヤーがカードを使用し、駆除や回復を行う。

4. **ラウンド終了フェーズ**
   - **外来種**: 「成長（パラメータ強化）」および「拡散（支配領域の自動拡大）」処理。
   - **終了判定**: ゲームの勝敗判定を行う。

### 4.3. カード・アクション機能

- **カードシステム**
- 山札やドローの概念を持たない。
- 全所持カードが「手札」として常に提示され、コストとクールタイムの制限内で自由に選択可能。

- **外来種アクション**
- **導入**: 外来種トークンをフィールドに配置する。
- **成長・拡散**: ラウンド経過により侵略力を高め、自動的に周囲のマスを侵略する。

- **在来種アクション**
- **駆除**: 侵略されたマスを「裸地マス（灰色）」または「先駆植生マス（薄緑）」へ変化させる。
- **回復**: 裸地マス等を「先駆植生マス（薄緑）」へ変化させ、再生を促す。

### 4.4. UI/UX 機能

- **3D 盤面表示**
- 植物やフィールドの状態をリッチな 3D グラフィックスで表現する。

- **操作性**
- タッチ操作（ドラッグ＆ドロップ、タップ）に最適化されたインターフェース。

- **プレビュー機能**
- カードドラッグ時などに、効果範囲や配置可能場所を視覚的にハイライト表示する。

- **手札（カードリスト）UI**
- 手札一覧はスワイプでページ送り可能とする。
- 盤面確認のため、手札リスト自体を 手札非表示/手札表示（Hide/Show）できる機能を設ける。

- **情報表示（HUD）**
- ラウンド通知や勝敗表示などの重要情報は、対面している両プレイヤーが読める向き・レイアウトで表示する。

### 4.5. 教育的要素

- **図鑑・解説機能**
- ゲームに登場する植物カードには、実物の写真を使用する。
- 各植物の特徴、原産地、生態系への具体的な悪影響などを解説するテキストを表示する。

---

## 5. 🚀 非機能要件 (Non-Functional Requirements)

### 5.1. ユーザビリティ・体験品質

- **プラットフォーム**
- Web ブラウザ上で動作すること（iPad 等のタブレット端末での動作に最適化）。

- **プレイ時間**
- 1 プレイが約 10 分で完結するテンポ感を維持すること。

- **レスポンス**
- 3D 描画を用いつつも、60fps を目標としたスムーズなアニメーションと操作追従性を確保すること。

- **視認性**
- 対面プレイ時、逆さまから見ても「どのマスが誰の支配下か」「どこに脅威があるか」が直感的に分かるデザインとすること。

### 5.2. 保守性・拡張性（アーキテクチャ）

- **Core-Feature アーキテクチャの採用**
- ゲームの基本システム（Core）と、個別の植物やルール（Feature）を明確に分離した構造とすること。

- **拡張性**
- 新しい植物カードや特殊ルールを、既存システムを破壊せずに追加・削除（着脱）できること。

- **堅牢性**
- 特定のカード機能（Feature）でエラーが発生しても、ゲーム進行そのもの（Core）が停止しないような設計とすること。

---

## 6. 📚 参考文献

- [地域と連携した河川における外来植物対策ハンドブック](https://www.mlit.go.jp/river/shishin_guideline/kankyo/gairai/pdf/handbook.pdf)
- [森林の遷移 - 先駆植生](https://www.shinrin-ringyou.com/shinrin_seitai/seni.php)
