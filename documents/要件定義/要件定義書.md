# 📋 要件定義書：侵緑 ~外来種 vs 在来種陣取りゲーム~

## 1. 🎮 ゲーム概要

本プロジェクトは、**「外来種植物の脅威と生態系保護」**をテーマにした、2 人対戦型の陣取り戦略ゲームである。
プレイヤーは「在来種サイド」と「外来種サイド」に分かれ、1 台のタブレット端末を挟んで対面でプレイする。
外来種サイドは裸地への侵入と爆発的な拡散を、在来種サイドは生態系の保全と外来種の駆除を目指し、最終的なフィールドの支配数を競う。

## 2. 🌏 背景

近年、地域の生態系を脅かす「侵略的外来種」の問題が深刻化している。しかし、その「一度定着すると根絶が困難」という特性や、「不用意な駆除がかえって拡散を招く」というリスクは、一般には十分に認知されていない。
特に、除草剤を使えない河川敷や公園などでは、物理的な除去と継続的なモニタリングが必要不可欠であり、市民レベルでの正しい知識と協力が求められている。

## 3. 🎯 目的

本ゲーム開発の目的は以下の 2 点である。

1.  **エンターテインメント**: 短時間（約 10 分）で決着する、非対称かつ戦略性の高い対戦ゲームを提供すること。
2.  **教育・啓蒙**: ゲームプレイを通じて、「初期侵入の防止」「早期発見・早期駆除」「適切な駆除手法の選択」の重要性を体験的に学習すること。

---

## 4. 🛠️ 機能要件 (Functional Requirements)

### 4.1. ゲームシステム・ルール

- **対戦形式**

  - 1 台のタブレット端末を使用した、2 人対面対戦（オフライン対戦）。
  - プレイヤーは「在来種サイド（後攻）」と「外来種サイド（先攻）」を担当する。

- **フィールド**

  - 縦 10 マス × 横 7 マスのグリッド構成。
  - **初期配置**: ゲーム開始時、ランダムに**10 箇所の「裸地マス（灰色）」**が生成され、残りは全て「在来種マス（緑色）」となる。

- **勝利条件**

  - 規定ラウンド（6〜8 ラウンドを想定）終了時、「外来種マス（赤）」と「在来種マス（緑）」の総数を比較し、多い側が勝利。

- **リソース管理（エンバイロメント）**
  - カード使用コストとして「エンバイロメント（AP）」を使用する。
  - ラウンド毎に最大値が+1 され、ラウンド開始時に全回復する。

### 4.2. ラウンド進行

各ラウンドは以下の 4 フェーズで構成される。

1.  **ラウンド開始フェーズ**

    - エンバイロメントの最大値増加および全回復。
    - **植生遷移**: 先駆植生マス（薄緑）が在来種マス（緑）へ自動回復する。

2.  **外来種ターン**

    - 外来種プレイヤーがカードを使用し、**裸地マス**へ「種（Seed）」を導入する。

3.  **在来種ターン**

    - 在来種プレイヤーがカードを使用し、「駆除（物理/完全）」や「回復」を行う。

4.  **ラウンド終了フェーズ**
    - **拡散 (Expansion)**: 成体（Core）化した外来種が周囲を侵略する。
    - **成長 (Establishment)**: 休眠期間を終えた「種」が「成体」へと変化する。
    - **終了判定**: ゲームの勝敗判定を行う。

### 4.3. アクション機能

- **外来種アクション**

  - **導入 (Introduction)**: 「種トークン」を**裸地マス**に配置する。在来種マスや先駆植生マスには配置できない。
  - **反撃 (Counter)**: 物理駆除された際、周囲に種をばら撒くなどの報復効果を発動する（特性持ちのみ）。

- **在来種アクション**
  - **物理駆除**: 低コストだが、敵の「反撃」を許すリスクがある。
  - **完全駆除**: 高コストだが、敵の「反撃」を無効化して安全に除去する。
  - **回復**: 裸地マスを「先駆植生マス」に変え、外来種の再侵入を防ぐ（防御）。

### 4.4. UI/UX 機能

- **3D 盤面表示**: 植物モデルやフィールドの状態を Three.js による 3D グラフィックスで表現する。
- **視認性**: 対面プレイ時、逆さまから見ても状況が把握できる UI デザインを採用する。
- **ハイライト**: 手番プレイヤーがカードを選択した際、効果範囲や配置可能マスを視覚的に強調表示する。

### 4.5. 教育的要素

- **カード図鑑**: 実在する外来種・在来種の名前、写真、生態特性（拡散力、反撃リスクなど）をカード情報として表示する。
- **用語の採用**: 「埋土種子」「先駆植生」「遮光シート被覆」など、実際の環境保全活動で使用される用語をゲーム内に取り入れる。

---

## 5. 🚀 非機能要件 (Non-Functional Requirements)

### 5.1. ユーザビリティ

- **プラットフォーム**: Web ブラウザ（iPad 等のタブレット端末に最適化）。
- **プレイ時間**: 1 プレイ約 10 分。

### 5.2. アーキテクチャ

- **Core-Feature 構成**: ゲームの基盤ロジック（Core）と、コンテンツデータ（Feature）を分離し、新しい植物やルールの追加を容易にする。
- **データ駆動**: カードの性能や挙動をマスターデータとして管理し、コード変更なしでバランス調整可能とする。

---

## 6. 📚 参考文献

- [地域と連携した河川における外来植物対策ハンドブック](https://www.mlit.go.jp/river/shishin_guideline/kankyo/gairai/pdf/handbook.pdf)
- [外来種被害防止行動計画](https://www.env.go.jp/nature/intro/1outline/actionplan.html)
