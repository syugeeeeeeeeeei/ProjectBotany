# ğŸ“Š ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¦ä»¶

ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ã‚²ãƒ¼ãƒ ã®å†…éƒ¨ãƒ­ã‚¸ãƒƒã‚¯ã§ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿å‹ï¼ˆTypeScript ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰ã‚’å®šç¾©ã—ã¾ã™ã€‚
å®Ÿè£…ã®éš›ã¯ `src/shared/types/` é…ä¸‹ã«é…ç½®ã—ã€å³å¯†ãªå‹ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã¾ã™ã€‚

---

### ğŸ“š å…±é€šå‹å®šç¾© (Primitives)

```typescript
// ã‚°ãƒªãƒƒãƒ‰å½¢çŠ¶ï¼ˆåŠ¹æœç¯„å›²ãƒ»æ‹¡æ•£å½¢çŠ¶ãªã©ï¼‰
export type GridShape =
  | "point" // 1ãƒã‚¹
  | "vertical" // ç¸¦ä¸€åˆ—
  | "horizon" // æ¨ªä¸€åˆ—
  | "cross" // åå­—
  | "x_cross" // æ–œã‚åå­—
  | "range"; // å‘¨å›²ï¼ˆæ­£æ–¹å½¢ï¼‰

// å¤–æ¥ç¨®ã®åæ’ƒèƒ½åŠ›
export type CounterAbility =
  | "none" // ãªã—
  | "spread_seed"; // ç¨®å­æ•£å¸ƒï¼ˆç‰©ç†é§†é™¤æ™‚ã«å‘¨å›²ã¸ç¨®ç”Ÿæˆï¼‰

// é§†é™¤ã‚¿ã‚¤ãƒ—
export type EradicationType =
  | "physical" // ç‰©ç†é§†é™¤ï¼ˆåæ’ƒãƒªã‚¹ã‚¯ã‚ã‚Šï¼‰
  | "complete"; // å®Œå…¨é§†é™¤ï¼ˆåæ’ƒç„¡åŠ¹ãƒ»å®‰å…¨ï¼‰

// é§†é™¤å¾Œã®åœŸåœ°çŠ¶æ…‹
export type PostRemovalState =
  | "bare" // è£¸åœ°ã«æˆ»ã‚‹
  | "pioneer" // å…ˆé§†æ¤ç”Ÿã«ãªã‚‹
  | "empty"; // å®Œå…¨æ¶ˆæ»…ï¼ˆæ¦‚å¿µä¸Šã®ç©ºï¼‰

// å›å¾©å¾Œã®åœŸåœ°çŠ¶æ…‹
export type PostRecoveryState =
  | "pioneer" // å…ˆé§†æ¤ç”Ÿ
  | "native"; // åœ¨æ¥ç¨®

// æˆé•·æ®µéš
export type GrowthStatus =
  | "seed" // ç¨®ï¼ˆç„¡å®³ã€ä¼‘çœ æœŸé–“ï¼‰
  | "plant"; // æˆä½“ï¼ˆæ‹¡æ•£ãƒ»åæ’ƒã‚ã‚Šï¼‰

// ãƒã‚¹ã®ç¨®é¡
export type CellType =
  | "native" // åœ¨æ¥ç¨®ï¼ˆç·‘ï¼‰
  | "alien" // å¤–æ¥ç¨®ï¼ˆèµ¤ï¼‰
  | "bare" // è£¸åœ°ï¼ˆç°ï¼‰
  | "pioneer"; // å…ˆé§†æ¤ç”Ÿï¼ˆè–„ç·‘ï¼‰
```

---

### ğŸƒ ã‚«ãƒ¼ãƒ‰å®šç¾© (Card Definitions)

ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ç®¡ç†ã•ã‚Œã‚‹ä¸å¤‰ã®å®šç¾©ã§ã™ã€‚

```typescript
/**
 * ã‚«ãƒ¼ãƒ‰å®šç¾©ã®åŸºåº•ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
 * å…¨ã¦ã®ã‚«ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ã§å…±é€šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
 */
export interface CardBase {
  id: string;
  name: string;
  description: string; // ãƒ•ãƒ¬ãƒ¼ãƒãƒ¼ãƒ†ã‚­ã‚¹ãƒˆå…¼èª¬æ˜
  cost: number; // å¿…è¦AP
  deckCount: number; // ãƒ‡ãƒƒã‚­ã«å«ã¾ã‚Œã‚‹æšæ•°
  imagePath: string;

  // --- ä½¿ç”¨åˆ¶é™ (Usage Restrictions) ---
  usageLimit?: number; // ä½¿ç”¨å›æ•°åˆ¶é™ (undefinedãªã‚‰ç„¡åˆ¶é™)
  cooldownTurns?: number; // ã‚¯ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ  (0ã¾ãŸã¯undefinedãªã‚‰ãªã—)
}

/**
 * å¤–æ¥ç¨®ã‚«ãƒ¼ãƒ‰å®šç¾©
 */
export interface AlienCardDefinition extends CardBase {
  cardType: "alien";
  expansionPower: number; // æ‹¡æ•£åŠ› (1~3)
  expansionRange: GridShape; // æ‹¡æ•£å½¢çŠ¶
  counterAbility: CounterAbility; // åæ’ƒç‰¹æ€§
}

/**
 * é§†é™¤ã‚«ãƒ¼ãƒ‰å®šç¾©
 */
export interface EradicationCardDefinition extends CardBase {
  cardType: "eradication";
  eradicationPower: number; // é§†é™¤åŠ›
  eradicationRange: GridShape; // é§†é™¤ç¯„å›²
  eradicationType: EradicationType; // ç‰©ç† vs å®Œå…¨
  chainDestruction: boolean; // é€£é–é§†é™¤ãƒ•ãƒ©ã‚°
  postState: PostRemovalState; // é§†é™¤å¾Œã®åœŸåœ°çŠ¶æ…‹
}

/**
 * å›å¾©ã‚«ãƒ¼ãƒ‰å®šç¾©
 */
export interface RecoveryCardDefinition extends CardBase {
  cardType: "recovery";
  recoveryPower: number; // å›å¾©åŠ›
  recoveryRange: GridShape; // å›å¾©ç¯„å›²
  protection: "none" | "1_round"; // é˜²å¾¡åŠ¹æœ
}

/**
 * çµ±åˆã‚«ãƒ¼ãƒ‰å‹
 */
export type CardDefinition =
  | AlienCardDefinition
  | EradicationCardDefinition
  | RecoveryCardDefinition;
```

---

### ğŸ® ã‚²ãƒ¼ãƒ çŠ¶æ…‹ (GameState)

Store ã§ç®¡ç†ã•ã‚Œã‚‹å¯å¤‰ã®çŠ¶æ…‹ãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚

```typescript
export interface GameState {
  // åŸºæœ¬æƒ…å ±
  currentRound: number;
  maxRounds: number;
  // ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç†
  phase: "start" | "alien_turn" | "native_turn" | "end";

  // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼çŠ¶æ…‹
  players: {
    native: PlayerState;
    alien: PlayerState;
  };

  // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰çŠ¶æ…‹
  field: {
    width: number;
    height: number;
    cells: CellState[][];
  };

  // ãƒ¦ãƒ‹ãƒƒãƒˆçŠ¶æ…‹ï¼ˆå¤–æ¥ç¨®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼‰
  alienInstances: Record<string, AlienInstance>;
}

/**
 * ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®çŠ¶æ…‹
 */
export interface PlayerState {
  id: "native" | "alien";
  ap: number; // ç¾åœ¨ã®AP
  maxAp: number; // ç¾åœ¨ã®æœ€å¤§AP

  // ã‚«ãƒ¼ãƒ‰ç®¡ç†çŠ¶æ…‹
  hand: string[]; // æ‰‹æœ­ã«ã‚ã‚‹ã‚«ãƒ¼ãƒ‰IDã®ãƒªã‚¹ãƒˆ
  usedCounts: Record<string, number>; // ã‚«ãƒ¼ãƒ‰ã”ã¨ã®ä½¿ç”¨å›æ•°è¨˜éŒ² (Usage Limitåˆ¤å®šç”¨)
  cooldowns: Record<string, number>; // ã‚«ãƒ¼ãƒ‰ã”ã¨ã®æ®‹ã‚Šã‚¯ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ  (Cooldownåˆ¤å®šç”¨)
}

/**
 * å¤–æ¥ç¨®ãƒ¦ãƒ‹ãƒƒãƒˆï¼ˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼‰ã®çŠ¶æ…‹
 */
export interface AlienInstance {
  id: string; // UUID
  cardId: string; // ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®IDå‚ç…§
  x: number;
  y: number;
  status: GrowthStatus; // seed | plant
  spawnedRound: number; // å°å…¥ã•ã‚ŒãŸãƒ©ã‚¦ãƒ³ãƒ‰ï¼ˆæˆé•·åˆ¤å®šç”¨ï¼‰
}

/**
 * å€‹ã€…ã®ãƒã‚¹ã®çŠ¶æ…‹
 */
export interface CellState {
  x: number;
  y: number;
  type: CellType;
  ownerId: "native" | "alien" | null; // æ”¯é…è€…
  alienUnitId?: string; // ã“ã®ãƒã‚¹ã«ã„ã‚‹ãƒ¦ãƒ‹ãƒƒãƒˆ(Seed/Core)ã®ID
}
```
