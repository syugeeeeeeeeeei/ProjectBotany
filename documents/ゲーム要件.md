# 💬 ゲームシステム要件

このセクションでは、対面対戦型カードゲーム「プロジェクト・ボタニー」の基本的なゲームシステムとルールを詳細に定義します。

---

## 🎮 ゲーム基本ルール

* **フィールド**: 縦10マス × 横7マス のグリッド（マス目）で構成されます。サイズは要調整です。
* **プレイヤー**: 「在来種サイド」と「外来種サイド」の2つのプレイヤーに分かれて対戦します。
* **ゲームの目的**: 外来種サイドはフィールドの侵略を、在来種サイドは在来種の保護とフィールドの再生を目指します。
* **勝敗条件**:
    * 規定ターン数（6〜8ターン、要調整）終了時に、両サイドのフィールドに存在する**外来種マス**と**在来種マス**の総数を比較し、より多くを支配しているサイドの勝利となります。
    * 同数の場合は引き分けとなります。
    * 規定ターン数に達する前に、どちらか一方のプレイヤーが支配する**外来種マス**または**在来種マス**が**0**になった場合、その場でゲームが終了し、マスが0になったサイドの敗北となります。
* **基本特性**: 外来種は常に在来種よりも侵略力が強く、在来種は外来種の侵略に対して駆除や再生で対応します。
* **リソース**: 各ターンの開始時、プレイヤーが保有できる「エンバイロメント」の**最大値が1ずつ増加**し、同時に現在のエンバイロメント量もその最大値まで**完全に回復**します。エンバイロメントはカードの使用コストとして消費されます。
    * 例：1ターン目開始時: エンバイロメントは 1/1
    * 2ターン目開始時: エンバイロメントの最大値が2になり、現在の量も2まで回復。エンバイロメントは 2/2
    * 3ターン目開始時: エンバイロメントの最大値が3になり、現在の量も3まで回復。エンバイロメントは 3/3
* **カード**: 両サイドは1〜5コストのカードを使用します。プレイヤーは、自身のエンバイロメントが許す範囲で、**自身のカードライブラリから直接カードを選択して**コストを消費し、効果を発動します。

---

## ⏳ ターンの進行フェーズ

各ターンは以下の3つのフェーズで構成され、交互に手番が進みます。

1.  **エンバイロメントフェーズ**: 各プレイヤーが保有できるエンバイロメントの最大値が1ずつ増加し、同時に現在のエンバイロメント量もその最大値まで完全に回復します。
2.  **召喚フェーズ**: 手番プレイヤーはエンバイロメントを消費してカードを使用し、効果を発動します。
3.  **活性フェーズ**:
    * このフェーズで、召喚フェーズで宣言された行動の結果がフィールドに反映され、ターン終了時の自動処理が行われます。
    * **外来種サイドの処理**: 外来種コマの成長、拡散、そして支配マスの状態に応じた除去処理がこのフェーズで行われます。
    * **在来種サイドの処理**: マスの自動回復処理が行われます。

---

## 🌿 マス所有権の明確化と用語の定義

* **支配マス (Dominant Cell)**:
    * 特定の外来種コマが現在影響下にあるマスのこと。外来種コマ自身が存在するマス（外来種マス）と、そのコマの侵略力・侵略形によって新たに侵略された「侵略マス」を合わせて「支配マス」と呼びます。
* **上書き支配 (Overrun Dominance)**:
    * ある外来種コマがすでに別の外来種コマによって「支配」されている侵略マスを、自身の「支配マス」として新たに侵略し、優先度に基づいて所有権を奪う行為を指します。

---

## ⚔️ 外来種コマの行動順と上書き支配のルール

活性フェーズにおいて、複数の外来種コマが同時に侵略を行う際、以下のルールで侵略マスの所有権の上書きを解決します。

1.  **侵略優先度 (Invasion Priority)**:
    * **召喚コストが高い外来種コマほど、侵略優先度が高くなります。**
    * **同コストの場合は、配置が新しい（ターン数が新しい）外来種コマほど、侵略優先度が高くなります。**
2.  **上書き支配の原則**:
    * 複数の外来種コマが同じマスを自身の支配マスとして主張した場合、**侵侵略優先度が高い外来種コマがそのマスの「支配マス」の所有権を得る（上書き支配）**。

---

## 🌳 在来種サイド

* **初期状態**: ゲーム開始時、フィールドの全てのマスは「在来種マス（緑色）」となっています。
* **手番**: 常に後攻となります。
* **召喚フェーズの行動**:
    * **駆除カードの発動**: 外来種マスや外来種を対象に駆除効果を発動できます。駆除カードの効果は、その後の活性フェーズには影響を与えません（即時適用されます）。
        * 駆除カードは基本的に外来種マスを**空マス（灰色）**に変えます。
    * **回復カードの発動**: **空マス（灰色）**を**再生待機マス（黄色）**や**在来種マス（緑色）**に変えることができます。（コストによる）
* **活性フェーズの処理**:
    * マスの状態が以下の順序で自動的に遷移します。
    1.  **再生待機マス（黄色）→ 在来種マス（緑色）**: フィールド上の全ての「再生待機マス（黄色）」が「在来種マス（緑色）」に変化します。
    2.  **空マス（灰色）→ 再生待機マス（黄色）**: 上記の処理が終わった後、フィールド上の全ての「空マス（灰色）」が「再生待機マス（黄色）」に変化します。

---

## 🌲 外来種サイド

* **初期状態**: ゲーム開始時、フィールドにはいかなるマスも保有していません。
* **手番**: 常に先行となります。
* **初期エンバイロメント**: 先行であること、および初期フィールドがないことに対するバランス調整として、初期エンバイロメントに補正（例: 通常より多くのエンバイロメントが付与される）がある可能性があります。これはゲームバランスとの兼ね合いで調整されます。
* **召喚フェーズの行動**:
    * **召喚**: 外来種カードを使用し、フィールド上に**外来種マス（コマ）**を配置します。
    * **移動 (Relocation)**: 特定のエンバイロメントを消費することで、すでにフィールドに配置されている既存の外来種コマの位置を変更できます。
        * **移動範囲**: 移動できる範囲は、その外来種コマが現在**支配している「侵略マス」の範囲内**に限られます。
        * **コスト**: 移動アクションにはエンバイロメントを消費します。**消費量は、その外来種カードの召喚コストと同量**とします。
* **活性フェーズの処理**:
    1.  **成長**: フィールド上のすべてのアクティブな外来種コマについて、成長条件（ターン経過や特定の条件）を満たしているかをチェックし、能力（侵略力、侵略形など）を強化します。この処理は活性フェーズの最初に発動されます。
    2.  **拡散 (Expansion)**:
        * 外来種マス（コマ）を起点として、その外来種コマが持つ「侵略力」と「侵略形」を参照したパターンで周囲のマスが**侵略マス（赤色）**に変化します。
        * **支配**: 拡散の結果、変化した侵略マスは、その拡散を行った外来種コマの**支配マス**となります。既に他の外来種コマによって支配されているマスであっても、侵略優先度が高い場合はその支配を上書きします。
    3.  **活性フェーズ終了時の外来種コマ除去**: 自身の「支配マス」が0個になった外来種コマはフィールドから除去されます。

---

## 🗑️ 活性フェーズ終了時の外来種コマ除去ルール

* 活性フェーズの最後に、自身の「支配マス」が0個になった外来種コマはフィールドから除去される。

---

## 🗺️ フィールドのマス状態定義

ゲームフィールド上の各マスは、以下のいずれかの状態を持ちます。

* **在来種マス (緑)**: 在来種サイドが支配しているマス。植物は生育に適した状態です。
* **外来種マス (赤)**: 外来種カードが召喚され、そのコアとなる「コマ」が置かれたマス。外来種サイドが支配しています。
    * **外来種コマ**: フィールドに配置される外来種カードに対応する実体。特定のマスに存在し、周囲に侵略マスを「拡散」させ、自身の「支配マス」を広げます。また、移動や成長、除去の対象となります。
* **侵略マス (赤)**: 外来種マスを起点とする外来種の侵略効果により、外来種サイドが支配するようになったマス。外来種の悪影響が及んでいます。
* **空マス (灰色)**: 外来種が駆除された後、何も生えていない状態のマス。この状態のマスはどちらのサイドも支配していません。在来種サイドの活性フェーズで、自動的に再生待機マス（黄色）に変化します。
* **再生待機マス (黄色)**: 空マスから変化した状態のマス。在来種サイドの活性フェーズで、自動的に在来種マス（緑）に再生されます。